OBJECTIVE:
We need to upload new vehicles according to client-defined categories and update fare rules to be dynamic and admin-editable â€” WITHOUT breaking any existing system functionality.

âš ï¸ CRITICAL SAFETY RULES (STRICT)

âŒ Do NOT change existing database schema unless absolutely required

âŒ Do NOT remove any working API

âŒ Do NOT break auto-assignment logic

âŒ Do NOT affect existing bookings

âœ… Only EXTEND vehicle data & fare rules management

âœ… 1ï¸âƒ£ VEHICLE CATEGORIES & MODELS TO BE ADDED

Please map and upload vehicles according to these broader categories and models:

ğŸ”¹ Classic Car

BYD Han

ğŸ”¹ Executive

Mercedes E Class

Lexus ES 300H

Tesla Model Y

Tesla Model 3

ğŸ”¹ First Class

Mercedes S Class

Audi A8

BMW 7 Series

ğŸ”¹ Urban SUV

BYD Song

Toyota Highlander

ğŸ”¹ Luxury SUV

GMC Yukon

Cadillac Escalade

ğŸ”¹ Elite Van

Mercedes V Class

ğŸ”¹ Mini Bus

Mercedes Sprinter

Each uploaded vehicle must include:

type (use the above category name as type)

model

plate_number (demo format allowed)

vendor_id

driver_id (if available)

max_passengers

max_luggage

status = available

active = true

âš ï¸ Use existing vehicles table only â€” do NOT create a new table.

âœ… 2ï¸âƒ£ FARE RULES TO BE APPLIED BY CATEGORY

Update fare rules according to vehicle type (category):

ğŸ”¹ Classic

Base Fare: AED 95

Per KM: AED 1

ğŸ”¹ Executive

Base Fare: AED 105

Per KM: AED 1

ğŸ”¹ Urban SUV

Base Fare: AED 108

Per KM: AED 1

ğŸ”¹ Elite Van (Standard)

Base Fare: AED 165

Per KM: AED 2

ğŸ”¹ Luxury SUV

Base Fare: AED 450

Per KM: AED 0 (No KM variation â€“ flat fare)

ğŸ”¹ Elite Van (VIP / Special)

Base Fare: AED 750

Per KM: AED 10

ğŸ”¹ Mini Bus

Base Fare: AED 1,050

Per KM: AED 12.5

âš ï¸ These rules must be applied at fare calculation time, not as hard-coded values inside booking logic.

âœ… 3ï¸âƒ£ ADMIN-EDITABLE FARE RULE SYSTEM (VERY IMPORTANT)

Admin must have a Fare Rules Management Screen where:

Admin can:

View all vehicle categories

Update:

Base Fare

Per KM Rate

Save changes at any time

Changes must:

Apply only to new bookings

NOT affect existing completed bookings

Preferred approach:

Either:

Use an existing fare_rules table (if any)

Or:

Create a small safe config table only for fare rules

But:

âŒ Do NOT hard-code rates in JS

âœ… All fare calculation must read from DB

âœ… 4ï¸âƒ£ FARE CALCULATION LOGIC (DYNAMIC)

When fare is calculated:

fare = base_fare + (distance_km Ã— per_km_rate)


Special case:

If per_km_rate = 0 â†’ fare = base_fare only (Luxury SUV case)

Fare must be calculated using:

booking.vehicle_type

distance_km

latest admin-defined fare rules

âœ… 5ï¸âƒ£ BACKWARD COMPATIBILITY (NO SYSTEM BREAK)

Existing vehicles must continue working

Existing bookings must remain unchanged

Auto-assignment must still:

Select vehicle by type

Then select tagged driver

Manual admin override must remain functional

âœ… 6ï¸âƒ£ FINAL VERIFICATION REQUIRED

After implementation, please confirm with screenshots:

âœ… Vehicles added under all new categories

âœ… Fare Rules Admin Screen visible & editable

âœ… Fare recalculates correctly for:

Classic

Executive

Luxury SUV

Mini Bus

âœ… Old bookings unaffected

âœ… 7ï¸âƒ£ VERY IMPORTANT

Do not:

Re-seed database

Reset bookings

Change authentication

Modify notification logic

Only:

Add new vehicles

Add dynamic fare rules

Add admin control for fares